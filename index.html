<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Quadro de Demandas</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap" rel="stylesheet">
  <script src="scripts/updateWeekDate.js"></script>
  <script src="scripts/pulseBadges.js"></script>
  <script src="scripts/playSoundEffect.js"></script>
  <script src="scripts/keysListener.js"></script>
</head>

<body>
  <div class="content">
    <div class="container">
      <header>
        <h1>üìã planejamento semanal</h1>
      </header>
      <div class="tabela-wrapper">
        <table id="quadroTabela">
          <thead>
            <tr>
              <th contenteditable="true">DEV</th>
              <th contenteditable="true">SEGUNDA</th>
              <th contenteditable="true">TER√áA</th>
              <th contenteditable="true">QUARTA</th>
              <th contenteditable="true">QUINTA</th>
              <th contenteditable="true">SEXTA</th>
            </tr>
          </thead>
          <tbody>
            <!-- JS will inject here  -->
          </tbody>
        </table>
      </div>
    </div>

    <div class="row">
      <div class="col col-fill">
        <header>
          <h2>‚è∞ lembrettz. </h2>
        </header>
        <div id="reminders" class="reminders">
          <span id="sweet-day"></span>
          <!-- JS will inject here -->
        </div>
      </div>

      <div class="col col-25">
        <header>
          <h2>üîä efeittz. </h2>
        </header>
        <div style="display: flex; flex-direction: column; gap: 0.5em;">
          <button onclick="playSoundById('sound-l')" class="btn">Faz o üá±</button>
          <audio id="sound-l" src="assets/sound.mp3" preload="auto"></audio>

          <button onclick="playSoundById('sound-end')" class="btn">Acabou üîö</button>
          <audio id="sound-end" src="assets/end.ogg" preload="auto"></audio>
        </div>
      </div>

      <div class="col col-25">
        <header>
          <h2>üé≤ bettz.</h2>
        </header>
        <div>
          <button class="btn" id="btn-bettz" onclick="bettz()" style="margin-bottom: 0.5em;">Escolher sortudo</button>

          <!-- Slot Machine container -->
          <div id="slot-container" class="slot-container">
            <div id="slot-text" class="slot-text">--</div>
          </div>
        </div>
      </div>

      <div class="col col-25">
        <header>
          <h2>‚å®Ô∏è teclaz.</h2>
        </header>
        <div id="key-pressed-display" class="key-pressed-display">
          Pressione uma tecla...
        </div>
      </div>

    </div>
  </div>

  <script>
    let isEditable = true

    function toggleEdit() {
      isEditable = !isEditable
      const cells = document.querySelectorAll('#quadroTabela th, #quadroTabela td')
      const icon = document.getElementById("lockIcon")

      cells.forEach(cell => {
        cell.contentEditable = isEditable ? "true" : "false"
        cell.classList.toggle("editavel", isEditable)
      })

      // Atualiza os caminhos do SVG (√≠cone do cadeado)
      icon.innerHTML = isEditable
        ? `<path d="M12 1a5 5 0 0 1 5 5v2" />
          <rect x="5" y="9" width="14" height="12" rx="2" ry="2" />`
        : `<path d="M17 11H7V7a5 5 0 0 1 10 0v4z" />
          <rect x="5" y="11" width="14" height="10" rx="2" ry="2" />`
    }
  </script>

  <!-- debug -->
  <script>
    document.addEventListener("keydown", function (event) {
      const display = document.getElementById("key-pressed-display");
      if (display) {
        display.textContent = `Voc√™ pressionou: ${event.key}`;
      }
    });
  </script>

  <script src="scripts/demandz.js"></script>
  <script src="scripts/sweetDay.js"></script>
  <script src="scripts/canonicalReminders.js"></script>
  <script src="scripts/bettz.js"></script>
</body>

</html>